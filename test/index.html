<html>
<meta name="referrer" content="origin">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <title>Meliorator: Test</title>
        <script src="../vendor/jquery.min.js"></script>
        <script src="../src/js/meliorator.js"></script>
        <link rel="stylesheet" type="text/css" href="../src/css/meliorator.css" />
        <script>
            function range(low, high) {
                d = []
                for (i = low; i <= high; i++)
                    d.push(i);
                return d;
            }
            $(document).ready(function() {

                // let's make some basic dataset that we'll use to test our lib...
                var sampleData = range(0, 40).map(function(i){ return {Number: i, Square: Math.pow(i,2), Cube: Math.pow(i,3)}});

                // here, we get the dataset, and see how we can use Meliorator to tranform it into a proper html table,
                // which is rendered in the container(s) we specify.
                // the only option we need to set is the 'data' field, others are optional.
                $('#table').Meliorator('table', { data: sampleData, tableClass: 'originalTable' });

                // in the next one, we shall attempt to use a pre-existing html table, as the source of our other
                // transformations. This comes in handy, because, there might be scenarios in the real world, where
                // the data to be used for analysis is only available in some html table on the document.
                // so, the following shows how Meliorator can scan an existing html table, and return an array of
                // objects from it.
                // NOTE: because jQuery annotates any results from operating on its selectors, we shall need to force
                // casting to plain old arrays for simpler use...
                var parsedDataSet = $.makeArray($('.originalTable').Meliorator('parse-table')[0]);
                console.log(parsedDataSet);

                // then, let's see if this parsed DataSet is indeed capable of being used to render the same table again
                $('#derivedTable').Meliorator('table', { data: parsedDataSet, tableClass: 'derivedTable' });

                // okay, now let's take this parsed table, and render an analytics panel for it :-)
                $('#analytics').Meliorator('analytics-panel', { data: parsedDataSet });

            });
        </script>
        <style>
            .inline {
                display: inline-block;
            }
            .data-container {
                padding: 6px;
                border: 2px solid #ccc;
                border-radius: 6px;
            }
            .legend {
                color: #49a761;
                font-size: larger;
            }

            #analytics {
                margin: 6px;
            }           
        </style>
    </head>
    <body>
        <div>
            <div id="table" class="inline data-container">
                <span class="legend">Original</span>
            </div> 
            <div id="derivedTable" class="inline data-container">
                <span class="legend">Derived</span>
            </div>
        </div>
        <div id="analytics"></div>
    </body>
</html>
